<?php

namespace Database\Factories;

use Illuminate\Database\Eloquent\Factories\Factory;
use App\Models\Performance;
use App\Models\Status;
use App\Models\Section;
use App\Models\Chat;

/**
 * @extends \Illuminate\Database\Eloquent\Factories\Factory<\App\Models\Performance>
 */
class PerformanceFactory extends Factory
{
    protected $model = Performance::class;

    public function definition()
    {
        return [
            'title' => $this->generateRandomTitle(),
            'description' => $this->generateRandomDescription(),
            'user_id' => rand(1, 10),
            'status_id' => Status::inRandomOrder()->first()->id,
            'section_id' => Section::inRandomOrder()->first()->id,
        ];
    }

    public function configure()
    {
        return $this->afterCreating(function (Performance $performance) {
            // Создаем чат для заявки
            Chat::create([
                'chatable_type' => Performance::class,
                'chatable_id' => $performance->id,
            ]);
        });
    }

    private function generateRandomTitle()
    {
        $titles = [
            'Исследование влияния света на растения',
            'Разработка нового метода очистки воды',
            'Анализ данных о климатических изменениях',
            'Создание модели солнечной системы',
            'Изучение микробов в почве',
            'Влияние физики на современные технологии',
            'Экологические проблемы и их решения',
            'Генетические исследования в медицине',
            'Космические исследования и их значение',
            'Физика и искусственный интеллект: новые горизонты',
            'Влияние температуры на рост растений',
            'Инновационные технологии в переработке отходов',
            'Моделирование климатических изменений с помощью ИИ',
            'Изучение роли бактерий в экосистемах',
            'Физика в медицине: от рентгена до МРТ',
            'Проблемы загрязнения океанов и их последствия',
            'Генетическая модификация: за и против',
            'Космические миссии: достижения и вызовы',
            'Физика и биология: пересечение наук',
            'Экологические инициативы в городах',
            'Влияние света на поведение животных'
        ];

        return $this->faker->randomElement($titles);
    }

    private function generateRandomDescription()
    {
        $descriptions = [
            'В данной заявке рассматривается влияние света на фотосинтез растений и его значение для экосистемы.',
            'Предлагается новый метод очистки воды с использованием природных фильтров и его эффективность.',
            'Анализ данных о климатических изменениях за последние 50 лет и их влияние на биосферу.',
            'Создание модели солнечной системы с использованием современных технологий и методов.',
            'Изучение микробов в почве и их роль в поддержании здоровья экосистемы.',
            'Обсуждение влияния физических законов на развитие технологий и их применение в жизни.',
            'Анализ экологических проблем, с которыми сталкивается современное общество, и возможные решения.',
            'Исследование генетических факторов, влияющих на здоровье человека и методы их анализа.',
            'Обсуждение значимости космических исследований для науки и общества в целом.',
            'Изучение взаимодействия физики и искусственного интеллекта в современных технологиях.',
            'Анализ влияния температуры на рост различных видов растений и их адаптацию к климату.',
            'Обзор инновационных технологий, применяемых для переработки отходов и их влияние на экологию.',
            'Моделирование климатических изменений с использованием искусственного интеллекта и его результаты.',
            'Изучение роли бактерий в экосистемах и их влияние на здоровье почвы.',
            'Обсуждение применения физических принципов в медицине, включая диагностику и лечение.',
            'Анализ проблем загрязнения океанов, их источников и возможных решений.',
            'Обсуждение генетической модификации: преимущества, риски и этические аспекты.',
            'Обзор достижений космических миссий и вызовов, с которыми сталкиваются ученые.',
            'Изучение пересечения физики и биологии в контексте современных исследований.',
            'Анализ экологических инициатив, реализуемых в городах, и их влияние на качество жизни.',
            'Исследование влияния света на поведение животных и их адаптацию к окружающей среде.'
        ];

        return $this->faker->randomElement($descriptions);
    }
}
